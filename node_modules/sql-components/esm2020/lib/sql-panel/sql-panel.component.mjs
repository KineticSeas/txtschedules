import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';
import * as i0 from "@angular/core";
import * as i1 from "../data.service";
import * as i2 from "@angular/router";
import * as i3 from "@angular/common";
export class SqlPanelComponent {
    constructor(_dataService, _router, _activatedRoute) {
        this._dataService = _dataService;
        this._router = _router;
        this._activatedRoute = _activatedRoute;
        //-- Inputs
        this.use_router = 'Y'; // does parameters come from Router.
        this.page = '';
        this.sql = ""; // query to populate panel.          
        this.subquery = ""; // subquery 1-3 go into parameters,
        this.subquery2 = "";
        this.subquery3 = "";
        this.id = '0'; // ID - ID3 go into parameters.
        this.id2 = '0';
        this.id3 = '0';
        this.card = "Y"; // Show the panel in a card Y/N
        this.closable = "N"; // Is the panel closable Y/N
        this.open = "Y"; // Does a closable form start open.
        this.class = ""; // Class for the panel container.
        this.style = ""; // Style for the panel container.
        this.title = ""; // Title of the Panel.
        this.bs_row = 'Y'; // Y means add a bootstrap row.
        this.bs_col = ''; // What bootstrap columns.
        this.change = new EventEmitter();
        this.counter = 0;
        this.parameterValue = '';
        this.parameters = { page: '', id: '', id2: '', id3: '' };
    }
    ngOnInit() {
        if (this.use_router == 'Y') {
            setTimeout(() => {
                this.myObs = this._dataService.paramSubject.subscribe(d => {
                    console.log('paramSubjct.subscribe');
                    console.log(d);
                    if (d.page !== undefined) {
                        this.page = d.page;
                    }
                    if (d.id !== undefined) {
                        this.id = d.id;
                    }
                    if (d.id2 !== undefined) {
                        this.id2 = d.id2;
                    }
                    if (d.id3 !== undefined) {
                        this.id3 = d.id3;
                    }
                    if (this.page !== 'AAA') {
                        console.log('sql: ' + this.sql);
                        console.log(d);
                        this.parameters.page = "";
                        this.parameters.id = this.id;
                        this.parameters.id2 = this.id2;
                        this.parameters.id3 = this.id3;
                        console.log(this.parameters);
                        this.myObs = this._dataService.getSQL(this.sql, this.parameters).subscribe((data) => {
                            console.log('panel init ds');
                            this.data = data[0];
                            console.log(this.data);
                            this._dataService.pageSubject.next(this.data);
                            if (this.data.id2 === undefined) {
                                this.data.id2 = '';
                            }
                            if (this.data.id3 === undefined) {
                                this.data.id3 = '';
                            }
                            this._dataService.containerSubject.next(this.data);
                        });
                    }
                });
            }, 500);
        }
    }
    ngAfterViewInit() {
    }
    ngDoCheck() {
    }
    ngOnChanges(changes) {
    }
    ngOnDestroy() {
        //  this.myObs.unsubscribe();
    }
}
SqlPanelComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.3", ngImport: i0, type: SqlPanelComponent, deps: [{ token: i1.SQLDataService }, { token: i2.Router }, { token: i2.ActivatedRoute }], target: i0.ɵɵFactoryTarget.Component });
SqlPanelComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.3", type: SqlPanelComponent, isStandalone: true, selector: "sql-panel", inputs: { use_router: "use_router", page: "page", data: "data", sql: "sql", subquery: "subquery", subquery2: "subquery2", subquery3: "subquery3", id: "id", id2: "id2", id3: "id3", card: "card", closable: "closable", open: "open", class: "class", style: "style", title: "title", bs_row: "bs_row", bs_col: "bs_col" }, outputs: { change: "change" }, usesOnChanges: true, ngImport: i0, template: "<ng-container *ngIf=\"card=='N'\">\n    <div *ngIf=\"bs_row=='Y'\" class=\"row\">\n        <div [class]=\"bs_col\">\n            <ng-container *ngTemplateOutlet=\"fullTmpl\"></ng-container>\n        </div>\n    </div>\n    <!-- bs_row == 'N' and bs_col exists -->\n    <div *ngIf=\"bs_row!='Y'&&bs_col!=''\">\n        <div [class]=\"bs_col\">\n            <ng-container *ngTemplateOutlet=\"fullTmpl\"></ng-container>\n        </div>\n    </div>\n    <!-- bs_row == 'N' and bs_col exists -->\n    <div *ngIf=\"bs_row!='Y'&&bs_col==''\">\n            <ng-container *ngTemplateOutlet=\"fullTmpl\"></ng-container>\n    </div>\n</ng-container>\n\n<!-- it is a card -->\n<div *ngIf=\"card=='Y'\">\n    <div *ngIf=\"bs_row=='Y'\" class=\"row\">\n        <div [class]=\"bs_col\">\n            <div class=\"card\">\n                <div class=\"card-header\" style=\"margin-top: 0px;\">\n                    <h2 *ngIf=\"title!=''\" p-2>{{ title }}</h2>\n                    <ng-container *ngTemplateOutlet=\"headerTmpl\"></ng-container>\n                </div>\n                <div class=\"card-body\">\n                    <ng-container *ngTemplateOutlet=\"footerTmpl\"></ng-container>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"bs_row!='Y'&&bs_col!=''\">\n        <div [class]=\"bs_col\">\n            <div class=\"card\">\n                <div class=\"card-header p-2\">\n                    <h2 *ngIf=\"title!=''\" p-2>{{ title }}</h2>\n                    <ng-container *ngTemplateOutlet=\"headerTmpl\"></ng-container>\n                </div>\n                <div class=\"card-body\">\n                    <ng-container *ngTemplateOutlet=\"footerTmpl\"></ng-container>\n                </div>\n            </div>\n        </div>\n    </div>    \n    <div *ngIf=\"bs_row!='Y'&&bs_col==''\">\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <h2 *ngIf=\"title!=''\" p-2>{{ title }}</h2>\n                    <ng-container *ngTemplateOutlet=\"headerTmpl\"></ng-container>\n                </div>\n                <div class=\"card-body\">\n                    <ng-container *ngTemplateOutlet=\"footerTmpl\"></ng-container>\n                </div>\n            </div>\n    </div>    \n</div>\n\n<ng-template #footerTmpl>\n    <ng-content select=\"[footer]\"></ng-content>\n</ng-template>\n\n<ng-template #headerTmpl>\n    <ng-content select=\"[header]\"></ng-content>\n</ng-template>\n\n<ng-template #fullTmpl>\n    <ng-content></ng-content>\n</ng-template>\n", styles: [""], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i3.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.3", ngImport: i0, type: SqlPanelComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sql-panel', standalone: true, imports: [CommonModule, RouterModule], template: "<ng-container *ngIf=\"card=='N'\">\n    <div *ngIf=\"bs_row=='Y'\" class=\"row\">\n        <div [class]=\"bs_col\">\n            <ng-container *ngTemplateOutlet=\"fullTmpl\"></ng-container>\n        </div>\n    </div>\n    <!-- bs_row == 'N' and bs_col exists -->\n    <div *ngIf=\"bs_row!='Y'&&bs_col!=''\">\n        <div [class]=\"bs_col\">\n            <ng-container *ngTemplateOutlet=\"fullTmpl\"></ng-container>\n        </div>\n    </div>\n    <!-- bs_row == 'N' and bs_col exists -->\n    <div *ngIf=\"bs_row!='Y'&&bs_col==''\">\n            <ng-container *ngTemplateOutlet=\"fullTmpl\"></ng-container>\n    </div>\n</ng-container>\n\n<!-- it is a card -->\n<div *ngIf=\"card=='Y'\">\n    <div *ngIf=\"bs_row=='Y'\" class=\"row\">\n        <div [class]=\"bs_col\">\n            <div class=\"card\">\n                <div class=\"card-header\" style=\"margin-top: 0px;\">\n                    <h2 *ngIf=\"title!=''\" p-2>{{ title }}</h2>\n                    <ng-container *ngTemplateOutlet=\"headerTmpl\"></ng-container>\n                </div>\n                <div class=\"card-body\">\n                    <ng-container *ngTemplateOutlet=\"footerTmpl\"></ng-container>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div *ngIf=\"bs_row!='Y'&&bs_col!=''\">\n        <div [class]=\"bs_col\">\n            <div class=\"card\">\n                <div class=\"card-header p-2\">\n                    <h2 *ngIf=\"title!=''\" p-2>{{ title }}</h2>\n                    <ng-container *ngTemplateOutlet=\"headerTmpl\"></ng-container>\n                </div>\n                <div class=\"card-body\">\n                    <ng-container *ngTemplateOutlet=\"footerTmpl\"></ng-container>\n                </div>\n            </div>\n        </div>\n    </div>    \n    <div *ngIf=\"bs_row!='Y'&&bs_col==''\">\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <h2 *ngIf=\"title!=''\" p-2>{{ title }}</h2>\n                    <ng-container *ngTemplateOutlet=\"headerTmpl\"></ng-container>\n                </div>\n                <div class=\"card-body\">\n                    <ng-container *ngTemplateOutlet=\"footerTmpl\"></ng-container>\n                </div>\n            </div>\n    </div>    \n</div>\n\n<ng-template #footerTmpl>\n    <ng-content select=\"[footer]\"></ng-content>\n</ng-template>\n\n<ng-template #headerTmpl>\n    <ng-content select=\"[header]\"></ng-content>\n</ng-template>\n\n<ng-template #fullTmpl>\n    <ng-content></ng-content>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.SQLDataService }, { type: i2.Router }, { type: i2.ActivatedRoute }]; }, propDecorators: { use_router: [{
                type: Input
            }], page: [{
                type: Input
            }], data: [{
                type: Input
            }], sql: [{
                type: Input
            }], subquery: [{
                type: Input
            }], subquery2: [{
                type: Input
            }], subquery3: [{
                type: Input
            }], id: [{
                type: Input
            }], id2: [{
                type: Input
            }], id3: [{
                type: Input
            }], card: [{
                type: Input
            }], closable: [{
                type: Input
            }], open: [{
                type: Input
            }], class: [{
                type: Input
            }], style: [{
                type: Input
            }], title: [{
                type: Input
            }], bs_row: [{
                type: Input
            }], bs_col: [{
                type: Input
            }], change: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3FsLXBhbmVsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3NxbC1jb21wb25lbnRzL3NyYy9saWIvc3FsLXBhbmVsL3NxbC1wYW5lbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zcWwtY29tcG9uZW50cy9zcmMvbGliL3NxbC1wYW5lbC9zcWwtcGFuZWwuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFhLFlBQVksRUFBMkUsTUFBTSxlQUFlLENBQUM7QUFDbkssT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRS9DLE9BQU8sRUFBMEIsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7Ozs7O0FBWXZFLE1BQU0sT0FBTyxpQkFBaUI7SUFpQzVCLFlBQW9CLFlBQTRCLEVBQ3RDLE9BQWUsRUFDZixlQUErQjtRQUZyQixpQkFBWSxHQUFaLFlBQVksQ0FBZ0I7UUFDdEMsWUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUNmLG9CQUFlLEdBQWYsZUFBZSxDQUFnQjtRQWpDekMsV0FBVztRQUNGLGVBQVUsR0FBUSxHQUFHLENBQUMsQ0FBeUIsb0NBQW9DO1FBQ25GLFNBQUksR0FBUSxFQUFFLENBQUM7UUFFZixRQUFHLEdBQVEsRUFBRSxDQUFDLENBQWlDLHFDQUFxQztRQUNwRixhQUFRLEdBQVEsRUFBRSxDQUFDLENBQTRCLG1DQUFtQztRQUNsRixjQUFTLEdBQVEsRUFBRSxDQUFDO1FBQ3BCLGNBQVMsR0FBUSxFQUFFLENBQUM7UUFDcEIsT0FBRSxHQUFRLEdBQUcsQ0FBQyxDQUFpQywrQkFBK0I7UUFDOUUsUUFBRyxHQUFRLEdBQUcsQ0FBQztRQUNmLFFBQUcsR0FBUSxHQUFHLENBQUM7UUFDZixTQUFJLEdBQVEsR0FBRyxDQUFDLENBQStCLCtCQUEr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QUc7c0JBQVgsS0FBSztnQkFDRyxJQUFJO3NCQUFaLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxJQUFJO3NCQUFaLEtBQUs7Z0JBQ0csS0FBSztzQkFBYixLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSztnQkFPSSxNQUFNO3NCQUFmLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgT25EZXN0cm95LCBFdmVudEVtaXR0ZXIsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgQWZ0ZXJWaWV3SW5pdCwgRG9DaGVjaywgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgU1FMRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9kYXRhLnNlcnZpY2UnOyBcbmltcG9ydCB7IFJvdXRlciwgQWN0aXZhdGVkUm91dGUsIFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzcWwtcGFuZWwnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBSb3V0ZXJNb2R1bGVdLFxuICB0ZW1wbGF0ZVVybDogJy4vc3FsLXBhbmVsLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vc3FsLXBhbmVsLmNvbXBvbmVudC5jc3MnXSxcbn0pXG5leHBvcnQgY2xhc3MgU3FsUGFuZWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIERvQ2hlY2ssIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95ICB7XG4gIFxuICAvLy0tIElucHV0c1xuICBASW5wdXQoKSB1c2Vfcm91dGVyOiBhbnkgPSAnWSc7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvZXMgcGFyYW1ldGVycyBjb21lIGZyb20gUm91dGVyLlxuICBASW5wdXQoKSBwYWdlOiBhbnkgPSAnJztcbiAgQElucHV0KCkgZGF0YTogYW55OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICBASW5wdXQoKSBzcWw6IGFueSA9IFwiXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcXVlcnkgdG8gcG9wdWxhdGUgcGFuZWwuICAgICAgICAgIFxuICBASW5wdXQoKSBzdWJxdWVyeTogYW55ID0gXCJcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VicXVlcnkgMS0zIGdvIGludG8gcGFyYW1ldGVycyxcbiAgQElucHV0KCkgc3VicXVlcnkyOiBhbnkgPSBcIlwiO1xuICBASW5wdXQoKSBzdWJxdWVyeTM6IGFueSA9IFwiXCI7XG4gIEBJbnB1dCgpIGlkOiBhbnkgPSAnMCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUQgLSBJRDMgZ28gaW50byBwYXJhbWV0ZXJzLlxuICBASW5wdXQoKSBpZDI6IGFueSA9ICcwJzsgXG4gIEBJbnB1dCgpIGlkMzogYW55ID0gJzAnOyBcbiAgQElucHV0KCkgY2FyZDogYW55ID0gXCJZXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNob3cgdGhlIHBhbmVsIGluIGEgY2FyZCBZL05cbiAgQElucHV0KCkgY2xvc2FibGU6IGFueSA9IFwiTlwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzIHRoZSBwYW5lbCBjbG9zYWJsZSBZL05cbiAgQElucHV0KCkgb3BlbjogYW55ID0gXCJZXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvZXMgYSBjbG9zYWJsZSBmb3JtIHN0YXJ0IG9wZW4uXG4gIEBJbnB1dCgpIGNsYXNzOiBhbnkgPSBcIlwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGFzcyBmb3IgdGhlIHBhbmVsIGNvbnRhaW5lci5cbiAgQElucHV0KCkgc3R5bGU6IGFueSA9IFwiXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0eWxlIGZvciB0aGUgcGFuZWwgY29udGFpbmVyLlxuICBASW5wdXQoKSB0aXRsZTogYW55ID0gXCJcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGl0bGUgb2YgdGhlIFBhbmVsLlxuICBASW5wdXQoKSBic19yb3c6IGFueSA9ICdZJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFkgbWVhbnMgYWRkIGEgYm9vdHN0cmFwIHJvdy5cbiAgQElucHV0KCkgYnNfY29sOiBhbnkgPSAnJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGF0IGJvb3RzdHJhcCBjb2x1bW5zLlxuICBteU9icyE6IFN1YnNjcmlwdGlvbjtcbiAgbXlEYXRnYU9icyE6IFN1YnNjcmlwdGlvbjtcblxuICByOiBhbnk7XG4gIHBhdGg6IGFueTtcblxuICBAT3V0cHV0KCkgY2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBjb3VudGVyOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBwYXJhbWV0ZXJWYWx1ZTogc3RyaW5nID0gJyc7XG4gIHBhcmFtZXRlcnM6IGFueSA9IHsgcGFnZTogJycsIGlkOiAnJywgaWQyOiAnJywgaWQzOiAnJ307XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZGF0YVNlcnZpY2U6IFNRTERhdGFTZXJ2aWNlLCBcbiAgICBwcml2YXRlIF9yb3V0ZXI6IFJvdXRlcixcbiAgICBwcml2YXRlIF9hY3RpdmF0ZWRSb3V0ZTogQWN0aXZhdGVkUm91dGUpIHtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIFxuICAgIGlmICh0aGlzLnVzZV9yb3V0ZXI9PSdZJykgeyBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5teU9icyA9IHRoaXMuX2RhdGFTZXJ2aWNlLnBhcmFtU3ViamVjdC5zdWJzY3JpYmUoZCA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwYXJhbVN1YmpjdC5zdWJzY3JpYmUnKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZCk7XG4gICAgICAgICAgICAgIGlmIChkLnBhZ2UhPT11bmRlZmluZWQpIHsgdGhpcy5wYWdlPWQucGFnZTsgfVxuICAgICAgICAgICAgICBpZiAoZC5pZCE9PXVuZGVmaW5lZCkgeyB0aGlzLmlkPWQuaWQ7IH1cbiAgICAgICAgICAgICAgaWYgKGQuaWQyIT09dW5kZWZpbmVkKSB7IHRoaXMuaWQyPWQuaWQyOyB9XG4gICAgICAgICAgICAgIGlmIChkLmlkMyE9PXVuZGVmaW5lZCkgeyB0aGlzLmlkMz1kLmlkMzsgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5wYWdlIT09J0FBQScpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3FsOiAnICsgdGhpcy5zcWwpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnBhZ2U9XCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuaWQ9dGhpcy5pZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuaWQyPXRoaXMuaWQyO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5pZDM9dGhpcy5pZDM7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgICB0aGlzLm15T2JzID0gdGhpcy5fZGF0YVNlcnZpY2UuZ2V0U1FMKHRoaXMuc3FsLCB0aGlzLnBhcmFtZXRlcnMpLnN1YnNjcmliZSgoZGF0YTphbnkpPT57XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGFuZWwgaW5pdCBkcycpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhPWRhdGFbMF07XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YVNlcnZpY2UucGFnZVN1YmplY3QubmV4dCh0aGlzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5pZDI9PT11bmRlZmluZWQpIHsgdGhpcy5kYXRhLmlkMiA9ICcnOyB9XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLmlkMz09PXVuZGVmaW5lZCkgeyB0aGlzLmRhdGEuaWQzID0gJyc7IH1cbiAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFTZXJ2aWNlLmNvbnRhaW5lclN1YmplY3QubmV4dCh0aGlzLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgfSwgNTAwKTtcbiAgICB9XG5cbiAgfVxuICAgICAgXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcblxuICB9XG4gIFxuICBuZ0RvQ2hlY2soKTogdm9pZCB7XG5cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcblxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gIC8vICB0aGlzLm15T2JzLnVuc3Vic2NyaWJlKCk7XG4gIH1cbiAgXG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwiY2FyZD09J04nXCI+XG4gICAgPGRpdiAqbmdJZj1cImJzX3Jvdz09J1knXCIgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgPGRpdiBbY2xhc3NdPVwiYnNfY29sXCI+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiZnVsbFRtcGxcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPCEtLSBic19yb3cgPT0gJ04nIGFuZCBic19jb2wgZXhpc3RzIC0tPlxuICAgIDxkaXYgKm5nSWY9XCJic19yb3chPSdZJyYmYnNfY29sIT0nJ1wiPlxuICAgICAgICA8ZGl2IFtjbGFzc109XCJic19jb2xcIj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJmdWxsVG1wbFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8IS0tIGJzX3JvdyA9PSAnTicgYW5kIGJzX2NvbCBleGlzdHMgLS0+XG4gICAgPGRpdiAqbmdJZj1cImJzX3JvdyE9J1knJiZic19jb2w9PScnXCI+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiZnVsbFRtcGxcIj48L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cbjwvbmctY29udGFpbmVyPlxuXG48IS0tIGl0IGlzIGEgY2FyZCAtLT5cbjxkaXYgKm5nSWY9XCJjYXJkPT0nWSdcIj5cbiAgICA8ZGl2ICpuZ0lmPVwiYnNfcm93PT0nWSdcIiBjbGFzcz1cInJvd1wiPlxuICAgICAgICA8ZGl2IFtjbGFzc109XCJic19jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCIgc3R5bGU9XCJtYXJnaW4tdG9wOiAwcHg7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMiAqbmdJZj1cInRpdGxlIT0nJ1wiIHAtMj57eyB0aXRsZSB9fTwvaDI+XG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJoZWFkZXJUbXBsXCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiZm9vdGVyVG1wbFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgKm5nSWY9XCJic19yb3chPSdZJyYmYnNfY29sIT0nJ1wiPlxuICAgICAgICA8ZGl2IFtjbGFzc109XCJic19jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyIHAtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8aDIgKm5nSWY9XCJ0aXRsZSE9JydcIiBwLTI+e3sgdGl0bGUgfX08L2gyPlxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiaGVhZGVyVG1wbFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImZvb3RlclRtcGxcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj4gICAgXG4gICAgPGRpdiAqbmdJZj1cImJzX3JvdyE9J1knJiZic19jb2w9PScnXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8aDIgKm5nSWY9XCJ0aXRsZSE9JydcIiBwLTI+e3sgdGl0bGUgfX08L2gyPlxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiaGVhZGVyVG1wbFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImZvb3RlclRtcGxcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PiAgICBcbjwvZGl2PlxuXG48bmctdGVtcGxhdGUgI2Zvb3RlclRtcGw+XG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW2Zvb3Rlcl1cIj48L25nLWNvbnRlbnQ+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI2hlYWRlclRtcGw+XG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW2hlYWRlcl1cIj48L25nLWNvbnRlbnQ+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI2Z1bGxUbXBsPlxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbjwvbmctdGVtcGxhdGU+XG4iXX0=