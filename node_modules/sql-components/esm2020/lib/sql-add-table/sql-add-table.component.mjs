import { Component, Input, Output, EventEmitter, ContentChildren } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { Ng2SearchPipeModule } from 'ng2-search-filter';
import { NgxTablePaginationModule } from 'ngx-table-pagination';
import * as i0 from "@angular/core";
import * as i1 from "../data.service";
import * as i2 from "@angular/common";
import * as i3 from "@angular/forms";
import * as i4 from "ngx-table-pagination";
import * as i5 from "ng2-search-filter";
export class SqlAddTableComponent {
    constructor(_dataService) {
        this._dataService = _dataService;
        // format: is built from ContentChildren and Input Parameters
        this.format = { title: '', search: '', class: '', style: '', columns: [], buttons: [] };
        this.adding = 'N';
        this.row_placeholder = 'row';
        this.col_placeholder = 'col-12';
        //-- Inputs
        this.use_parameters = 'N';
        this.data = ''; // Use Data if data comes from function.
        this.sql = ''; // SQL that gets data.
        this.card = "Y"; // Show the form in a card Y/N
        this.card_class = '';
        this.card_style = '';
        this.container_class = 'container-fluid m-2 p-2'; // Class of the outer ng-container.
        this.container_style = ''; // Style of the outer ng-container.  
        this.closable = "N"; // Is the form closable Y/N
        this.search = 'TOP'; // Location of the search box.
        this.bs_row = 'Y'; // Y means add a bootstrap row.
        this.bs_col = 'col-sm-12 col-lg-12 col-xl-12'; // What bootstrap columns.
        this.table_class = 'table table-striped table-condensed'; // class of the table.
        this.table_style = ''; // style of the table.
        this.edit = 'Y'; // Add custom edit button.
        this.title = 'Title Not Set'; // title of the page.
        this.pagination = 'Y'; // Include pagination.
        this.pagesize = 25; // rows per page for pagination.
        this.id = '0'; // id for where clause.
        this.id2 = '0'; // id for where clause.
        this.id3 = '0'; // id for where clause.
        this.open = "Y"; // Does a closable list start open.
        this.class = 'table table-striped table-condensed'; // Class for the table container.
        this.style = ""; // Style for the table container.
        this.handler = 'default'; // what handler is used to process the form.
        this.button_click = new EventEmitter();
        this.row_click = new EventEmitter();
        this.top_button_click = new EventEmitter();
        this.parameters = { page: '', id: '', id2: '', id3: '' };
        this.last_parameters = { page: 'xxx', id: 'xxx', id2: 'xxx', id3: 'xxx' };
        this.page = '';
        this.counter = 0;
        this.myObs = this._dataService.dataSubject.subscribe(d => {
            this.data = d;
            if (d.error_code === 0) {
                this.adding = 'N';
                this.tableRefresh();
            }
        });
    }
    ngOnInit() {
        this.format.search = 'Y';
    }
    topButtonClick(m) {
        this.top_button_click.emit(m);
    }
    rowClick(m) {
        this.row_click.emit(m);
    }
    editClick(m) {
        console.log('clicked m');
        let p = { id: '', id2: '', id3: '' };
        if (m.id !== undefined) {
            p.id = m.id;
        }
        ;
        if (m.id2 !== undefined) {
            p.id2 = m.id2;
        }
        ;
        if (m.id3 !== undefined) {
            p.id3 = m.id3;
        }
        ;
        if (m.edit === 'Y') {
            m.edit = 'N';
        }
        else {
            this.list.forEach((value) => {
                value.edit = 'N';
            });
            this.adding = 'N';
            this._dataService.containerSubject.next(p);
            m.edit = 'Y';
        }
    }
    addClick() {
        let p = { id: '', id2: '', id3: '' };
        if (this.adding === 'Y') {
            this.adding = 'N';
        }
        else {
            this.list.forEach((value) => {
                value.edit = 'N';
            });
            this._dataService.containerSubject.next(p);
            this.adding = 'Y';
        }
    }
    buttonClick(m) {
        this.button_click.emit(m);
    }
    ngAfterViewInit() {
        if (this.use_parameters === 'Y') {
            this.myParameterObs = this._dataService.paramSubject.subscribe(d => {
                this.parameters = d;
                this.myDataObs = this._dataService.getSQL(this.sql, this.parameters).subscribe((data) => {
                    this.list = data;
                    this.list.forEach(function (value) {
                        value.active = 'N';
                    });
                });
            });
        }
        if (this.use_parameters === 'N') {
            this.parameters.page = this.page;
            this.parameters.id = this.id;
            this.parameters.id2 = this.id2;
            this.parameters.id3 = this.id3;
            this.myDataObs = this._dataService.getSQL(this.sql, this.parameters).subscribe((data) => {
                this.list = data;
                this.list.forEach(function (value) {
                    value.active = 'N';
                });
            });
        }
        this.format.title = this.title;
        this.format.class = this.class;
        this.format.style = this.style;
        this.format.pagination = this.pagination;
        this.format.pagesize = this.pagesize;
        if (this.bs_row == 'Y') {
            this.row_placeholder = "row";
        }
        else {
            this.row_placeholder = "none";
        }
        this.col_placeholder = this.bs_col;
        this.column_list.forEach((e) => {
            let column_template = { column_name: '', class: '', type: '', style: '', title: '', value: '' };
            //-- TH is data column
            if (e.nativeElement.nodeName == 'TH') {
                column_template.type = "data";
                column_template.value = e.nativeElement.id;
                column_template.title = e.nativeElement.innerHTML;
            }
            //-- BUTTON is button column
            if (e.nativeElement.nodeName == 'BUTTON') {
                column_template.type = "button";
                column_template.value = '';
                column_template.title = e.nativeElement.innerHTML;
            }
            //-- TD is text column
            if (e.nativeElement.nodeName == 'TD') {
                column_template.type = "text";
                column_template.title = '';
                column_template.value = e.nativeElement.innerHTML;
            }
            if (e.nativeElement.className !== undefined) {
                column_template.class = e.nativeElement.className;
            }
            column_template.style = e.nativeElement.style.cssText;
            this.format.columns.push(column_template);
        });
        if (this._dataService !== undefined && this.parameters !== undefined && this.sql !== undefined) {
            if (this.last_parameters.page != this.parameters.page ||
                this.last_parameters.id != this.parameters.id ||
                this.last_parameters.id2 != this.parameters.id2 ||
                this.last_parameters.id3 != this.parameters.id3) {
                this.last_parameters.page = this.parameters.page;
                this.last_parameters.id = this.parameters.id;
                this.last_parameters.id2 = this.parameters.id2;
                this.last_parameters.id3 = this.parameters.id3;
                try {
                    this.myDataObs = this._dataService.getSQL(this.sql, this.parameters).subscribe((data) => {
                        if (data !== undefined) {
                            this.list = data;
                        }
                    });
                }
                catch {
                }
            }
        }
    }
    tableRefresh() {
        this.last_parameters.page = this.parameters.page;
        this.last_parameters.id = this.parameters.id;
        this.last_parameters.id2 = this.parameters.id2;
        this.last_parameters.id3 = this.parameters.id3;
        this.adding = 'N';
        this.myDataObs = this._dataService.getSQL(this.sql, this.parameters).subscribe((data) => {
            this.list = data;
        });
    }
    ngOnDestroy() {
        //     this.myObs.unsubscribe();
        //     this.myDataObs.unsubscribe();
        //     this.myParameterObs.unsubscribe();
    }
}
SqlAddTableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.3", ngImport: i0, type: SqlAddTableComponent, deps: [{ token: i1.SQLDataService }], target: i0.ɵɵFactoryTarget.Component });
SqlAddTableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.3", type: SqlAddTableComponent, isStandalone: true, selector: "sql-add-table", inputs: { use_parameters: "use_parameters", data: "data", sql: "sql", card: "card", card_class: "card_class", card_style: "card_style", container_class: "container_class", container_style: "container_style", closable: "closable", search: "search", bs_row: "bs_row", bs_col: "bs_col", table_class: "table_class", table_style: "table_style", edit: "edit", title: "title", pagination: "pagination", pagesize: "pagesize", id: "id", id2: "id2", id3: "id3", open: "open", class: "class", style: "style", handler: "handler" }, outputs: { button_click: "button_click", row_click: "row_click", top_button_click: "top_button_click" }, queries: [{ propertyName: "title_list", predicate: ["title"] }, { propertyName: "column_list", predicate: ["column"] }], ngImport: i0, template: "<div class=\"card\" [class]=\"class\" [style]=\"style\">\n    <div class=\"card-header\"  style=\"margin-top: 0px;\">\n        <div class=\"row\" style=\"width:100%;\">\n            <div class=\"col-md-9\">\n                <h2>{{ title }}</h2>\n            </div>\n            <div class=\"col-md-3\" style=\"text-align: right;\">\n                <button (click)=\"addClick()\" class=\"btn btn-primary\"><i class=\"bi bi-plus-square\"></i></button>\n            </div>\n        </div>\n    </div>\n    <div class=\"card-body\">\n        <div *ngIf=\"adding=='Y'\" class=\"row\">\n            <div class=\"col-12\">\n                <ng-container *ngTemplateOutlet=\"contentTmpl\"></ng-container>\n            </div>\n            <div class=\"col-12\" style=\"text-align: right;\">\n                <button (click)=\"addClick()\" class=\"btn btn-secondary\">Close</button>\n            </div>\n        </div>\n        <div *ngIf=\"format.search=='TOP'\" class=\"row m-1 p-3\">\n            <div class=\"col-6\">\n                Search: <input style=\"max-width:320px;\" class=\"form-control\" type=\"text\" id=\"term\" name=\"term\" [(ngModel)]=\"term\"> \n            </div>\n        </div>\n        <div *ngIf=\"format.buttons.length>0||format.search=='Y'\" class=\"row m-1 p-3\">\n            <div *ngIf=\"format.search=='Y'\" class=\"col-lg-6\">\n                Search: <input style=\"max-width:320px;\" class=\"form-control\" type=\"text\" id=\"term\" name=\"term\" [(ngModel)]=\"term\"> \n            </div>\n            <div class=\"col-md-2\" *ngFor=\"let m of format.buttons\">\n                <button (click)=\"topButtonClick(m.value);\" [class]=\"m.class\" [style]=\"m.style\" [innerHTML]=\"m.title\"></button>\n            </div>\n        </div>\n        <table [class]=\"table_class\" [style]=\"table_style\">\n            <thead>\n                <ng-container *ngFor=\"let m of format.columns\">\n                    <th *ngIf=\"m.type!='button'\" [style]=\"m.style\" class=\"p-2\">{{ m.title }}</th>\n                    <th *ngIf=\"m.type=='button'\" [style]=\"m.style\" class=\"p-2\"></th>\n                </ng-container>   \n                <td *ngIf=\"edit=='Y'\">\n                </td>\n            </thead>\n        <tbody>\n        <ng-container *ngFor=\"let m of list | filter: term | paginate: { currentPage: p , itemsPerPage: format.pagesize }\">\n            <tr class=\"p-2\">\n                <ng-container *ngFor=\"let n of format.columns\">\n                <td (click)=\"rowClick(m)\" [style]=\"m.style\"  *ngIf=\"n['type']=='data'\" [innerHTML]=\"m[n['value']]\" [class]=\"n['class']\"></td>\n                    <td (click)=\"rowClick(m)\" [style]=\"m.style\"  *ngIf=\"n['type']=='text'\" [innerHTML]=\"n['value']\" [class]=\"n['class']\"></td>\n                                        <td *ngIf=\"n['type']=='button'\">\n                                            <button (click)=\"buttonClick(m)\" [style]=\"m.style\" [class]=\"n.class\" [innerHTML]=\"n.title\"></button>\n                                        </td>\n                                    </ng-container>\n                                    <td *ngIf=\"edit=='Y'\" style=\"width:40px;\">\n                                        <button class=\"btn btn-light\" (click)=\"editClick(m);\">\n                                            <i class=\"bi bi-pencil-square\"></i>\n                                        </button>\n                                    </td>\n                                </tr> \n                                <tr *ngIf=\"m?.edit=='Y'\">\n                                    <td [colSpan]=\"format.columns.length\">\n                                        <ng-container *ngTemplateOutlet=\"contentTmpl\"></ng-container>\n                                    </td>\n                                </tr>\n                            </ng-container>\n                        </tbody> \n                    </table>\n                    <div *ngIf=\"format.pagination=='Y'\">\n                            <paging-controls (pageChange)=\"p = $event\" [isItemsPerPage]=\"false\"  \n                            class=\"my-pagination\"></paging-controls> \n                    </div>\n                </div> \n            </div> \n<ng-template #contentTmpl>\n    <ng-content select=\"[form]\"></ng-content>\n</ng-template>\n", styles: [""], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: NgxTablePaginationModule }, { kind: "component", type: i4.PaginationComponent, selector: "paging-controls", inputs: ["maxSize", "previousLabel", "nextLabel", "screenReaderPaginationLabel", "screenReaderPageLabel", "screenReaderCurrentLabel", "directionLinks", "autoHide", "responsive", "id", "isItemsPerPage"], outputs: ["pageChange", "pageBoundsCorrection"] }, { kind: "pipe", type: i4.PaginationPipe, name: "paginate" }, { kind: "ngmodule", type: Ng2SearchPipeModule }, { kind: "pipe", type: i5.Ng2SearchPipe, name: "filter" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.3", ngImport: i0, type: SqlAddTableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sql-add-table', standalone: true, imports: [CommonModule,
                        FormsModule,
                        NgxTablePaginationModule,
                        Ng2SearchPipeModule], template: "<div class=\"card\" [class]=\"class\" [style]=\"style\">\n    <div class=\"card-header\"  style=\"margin-top: 0px;\">\n        <div class=\"row\" style=\"width:100%;\">\n            <div class=\"col-md-9\">\n                <h2>{{ title }}</h2>\n            </div>\n            <div class=\"col-md-3\" style=\"text-align: right;\">\n                <button (click)=\"addClick()\" class=\"btn btn-primary\"><i class=\"bi bi-plus-square\"></i></button>\n            </div>\n        </div>\n    </div>\n    <div class=\"card-body\">\n        <div *ngIf=\"adding=='Y'\" class=\"row\">\n            <div class=\"col-12\">\n                <ng-container *ngTemplateOutlet=\"contentTmpl\"></ng-container>\n            </div>\n            <div class=\"col-12\" style=\"text-align: right;\">\n                <button (click)=\"addClick()\" class=\"btn btn-secondary\">Close</button>\n            </div>\n        </div>\n        <div *ngIf=\"format.search=='TOP'\" class=\"row m-1 p-3\">\n            <div class=\"col-6\">\n                Search: <input style=\"max-width:320px;\" class=\"form-control\" type=\"text\" id=\"term\" name=\"term\" [(ngModel)]=\"term\"> \n            </div>\n        </div>\n        <div *ngIf=\"format.buttons.length>0||format.search=='Y'\" class=\"row m-1 p-3\">\n            <div *ngIf=\"format.search=='Y'\" class=\"col-lg-6\">\n                Search: <input style=\"max-width:320px;\" class=\"form-control\" type=\"text\" id=\"term\" name=\"term\" [(ngModel)]=\"term\"> \n            </div>\n            <div class=\"col-md-2\" *ngFor=\"let m of format.buttons\">\n                <button (click)=\"topButtonClick(m.value);\" [class]=\"m.class\" [style]=\"m.style\" [innerHTML]=\"m.title\"></button>\n            </div>\n        </div>\n        <table [class]=\"table_class\" [style]=\"table_style\">\n            <thead>\n                <ng-container *ngFor=\"let m of format.columns\">\n                    <th *ngIf=\"m.type!='button'\" [style]=\"m.style\" class=\"p-2\">{{ m.title }}</th>\n                    <th *ngIf=\"m.type=='button'\" [style]=\"m.style\" class=\"p-2\"></th>\n                </ng-container>   \n                <td *ngIf=\"edit=='Y'\">\n                </td>\n            </thead>\n        <tbody>\n        <ng-container *ngFor=\"let m of list | filter: term | paginate: { currentPage: p , itemsPerPage: format.pagesize }\">\n            <tr class=\"p-2\">\n                <ng-container *ngFor=\"let n of format.columns\">\n                <td (click)=\"rowClick(m)\" [style]=\"m.style\"  *ngIf=\"n['type']=='data'\" [innerHTML]=\"m[n['value']]\" [class]=\"n['class']\"></td>\n                    <td (click)=\"rowClick(m)\" [style]=\"m.style\"  *ngIf=\"n['type']=='text'\" [innerHTML]=\"n['value']\" [class]=\"n['class']\"></td>\n                                        <td *ngIf=\"n['type']=='button'\">\n                                            <button (click)=\"buttonClick(m)\" [style]=\"m.style\" [class]=\"n.class\" [innerHTML]=\"n.title\"></button>\n                                        </td>\n                                    </ng-container>\n                                    <td *ngIf=\"edit=='Y'\" style=\"width:40px;\">\n                                        <button class=\"btn btn-light\" (click)=\"editClick(m);\">\n                                            <i class=\"bi bi-pencil-square\"></i>\n                                        </button>\n                                    </td>\n                                </tr> \n                                <tr *ngIf=\"m?.edit=='Y'\">\n                                    <td [colSpan]=\"format.columns.length\">\n                                        <ng-container *ngTemplateOutlet=\"contentTmpl\"></ng-container>\n                                    </td>\n                                </tr>\n                            </ng-container>\n                        </tbody> \n                    </table>\n                    <div *ngIf=\"format.pagination=='Y'\">\n                            <paging-controls (pageChange)=\"p = $event\" [isItemsPerPage]=\"false\"  \n                            class=\"my-pagination\"></paging-controls> \n                    </div>\n                </div> \n            </div> \n<ng-template #contentTmpl>\n    <ng-content select=\"[form]\"></ng-content>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.SQLDataService }]; }, propDecorators: { title_list: [{
                type: ContentChildren,
                args: ['title']
            }], column_list: [{
                type: ContentChildren,
                args: ['column']
            }], use_parameters: [{
                type: Input
            }], data: [{
                type: Input
            }], sql: [{
                type: Input
            }], card: [{
                type: Input
            }], card_class: [{
                type: Input
            }], card_style: [{
                type: Input
            }], container_class: [{
                type: Input
            }], container_style: [{
                type: Input
            }], closable: [{
                type: Input
            }], search: [{
                type: Input
            }], bs_row: [{
                type: Input
            }], bs_col: [{
                type: Input
            }], table_class: [{
                type: Input
            }], table_style: [{
                type: Input
            }], edit: [{
                type: Input
            }], title: [{
                type: Input
            }], pagination: [{
                type: Input
            }], pagesize: [{
                type: Input
            }], id: [{
                type: Input
            }], id2: [{
                type: Input
            }], id3: [{
                type: Input
            }], open: [{
                type: Input
            }], class: [{
                type: Input
            }], style: [{
                type: Input
            }], handler: [{
                type: Input
            }], button_click: [{
                type: Output
            }], row_click: [{
                type: Output
            }], top_button_click: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3FsLWFkZC10YWJsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zcWwtY29tcG9uZW50cy9zcmMvbGliL3NxbC1hZGQtdGFibGUvc3FsLWFkZC10YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zcWwtY29tcG9uZW50cy9zcmMvbGliL3NxbC1hZGQtdGFibGUvc3FsLWFkZC10YWJsZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUNyRCxlQUFlLEVBQTZCLE1BQU0sZUFBZSxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUcvQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDeEQsT0FBTyxFQUFFLHdCQUF3QixFQUF1QixNQUFNLHNCQUFzQixDQUFDOzs7Ozs7O0FBYXJGLE1BQU0sT0FBTyxvQkFBb0I7SUFzRC9CLFlBQW9CLFlBQTRCO1FBQTVCLGlCQUFZLEdBQVosWUFBWSxDQUFnQjtRQTlDaEQsNkRBQTZEO1FBQzdELFdBQU0sR0FBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFJeEYsV0FBTSxHQUFRLEdBQUcsQ0FBQztRQUVsQixvQkFBZSxHQUFRLEtBQUssQ0FBQztRQUM3QixvQkFBZSxHQUFRLFFBQVEsQ0FBQztRQUVoQyxXQUFXO1FBQ0YsbUJBQWMsR0FBRyxHQUFHLENBQUM7UUFDckIs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cHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25EZXN0cm95LFxuICBDb250ZW50Q2hpbGRyZW4sIEVsZW1lbnRSZWYsIEFmdGVyVmlld0luaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBTUUxEYXRhU2VydmljZSB9IGZyb20gJy4uL2RhdGEuc2VydmljZSc7XG5pbXBvcnQgeyBEYXRhIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTmcyU2VhcmNoUGlwZU1vZHVsZSB9IGZyb20gJ25nMi1zZWFyY2gtZmlsdGVyJztcbmltcG9ydCB7IE5neFRhYmxlUGFnaW5hdGlvbk1vZHVsZSwgUGFnaW5hdGlvbkNvbXBvbmVudCB9IGZyb20gJ25neC10YWJsZS1wYWdpbmF0aW9uJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgT2JzZXJ2YWJsZSwgZnJvbSB9IGZyb20gJ3J4anMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzcWwtYWRkLXRhYmxlJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgXG4gICAgRm9ybXNNb2R1bGUsXG4gICAgTmd4VGFibGVQYWdpbmF0aW9uTW9kdWxlLCBcbiAgICBOZzJTZWFyY2hQaXBlTW9kdWxlXSxcbiAgdGVtcGxhdGVVcmw6ICcuL3NxbC1hZGQtdGFibGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9zcWwtYWRkLXRhYmxlLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBTcWxBZGRUYWJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95ICB7XG4gIC8vIFxuICBAQ29udGVudENoaWxkcmVuKCd0aXRsZScpIHByaXZhdGUgdGl0bGVfbGlzdCE6IEVsZW1lbnRSZWY7XG4gIEBDb250ZW50Q2hpbGRyZW4oJ2NvbHVtbicpIHByaXZhdGUgY29sdW1uX2xpc3QhOiBFbGVtZW50UmVmW107XG4gIG15T2JzITogU3Vic2NyaXB0aW9uO1xuICBteURhdGFPYnMhOiBTdWJzY3JpcHRpb247XG4gIG15UGFyYW1ldGVyT2JzITogU3Vic2NyaXB0aW9uO1xuICBcbiAgLy8gZm9ybWF0OiBpcyBidWlsdCBmcm9tIENvbnRlbnRDaGlsZHJlbiBhbmQgSW5wdXQgUGFyYW1ldGVyc1xuICBmb3JtYXQ6IGFueSA9IHsgdGl0bGU6ICcnLCBzZWFyY2g6ICcnLCBjbGFzczogJycsIHN0eWxlOiAnJywgY29sdW1uczogW10sIGJ1dHRvbnM6IFtdIH07XG4gIHRlcm06IGFueTsgICAgICAgICAgLy8gdXNlZCBieSBzZWFyY2ggZmlsdGVyLlxuICBsaXN0OiBhbnk7ICAgICAgICAgIC8vIGhvbGRzIHRoZSBsaXN0IHJldHVybmVkIGJ5IHRoZSBxdWVyeS5cbiAgcDogYW55OyAgICAgICAgICAgICAvLyB1c2VkIGJ5IHBhZ2luYXRpb25cbiAgYWRkaW5nOiBhbnkgPSAnTic7XG4gIFxuICByb3dfcGxhY2Vob2xkZXI6IGFueSA9ICdyb3cnO1xuICBjb2xfcGxhY2Vob2xkZXI6IGFueSA9ICdjb2wtMTInO1xuICBcbiAgLy8tLSBJbnB1dHNcbiAgQElucHV0KCkgdXNlX3BhcmFtZXRlcnMgPSAnTic7XG4gIEBJbnB1dCgpIGRhdGE6IGFueSA9ICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIERhdGEgaWYgZGF0YSBjb21lcyBmcm9tIGZ1bmN0aW9uLlxuICBASW5wdXQoKSBzcWw6IGFueSA9ICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNRTCB0aGF0IGdldHMgZGF0YS5cbiAgQElucHV0KCkgY2FyZDogYW55ID0gXCJZXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNob3cgdGhlIGZvcm0gaW4gYSBjYXJkIFkvTlxuICBASW5wdXQoKSBjYXJkX2NsYXNzOiBhbnkgPSAnJztcbiAgQElucHV0KCkgY2FyZF9zdHlsZTogYW55ID0gJyc7XG4gIEBJbnB1dCgpIGNvbnRhaW5lcl9jbGFzczogYW55ID0gJ2NvbnRhaW5lci1mbHVpZCBtLTIgcC0yJzsgICAgICAgICAgICAgIC8vIENsYXNzIG9mIHRoZSBvdXRlciBuZy1jb250YWluZXIuXG4gIEBJbnB1dCgpIGNvbnRhaW5lcl9zdHlsZTogYW55ID0gJyc7ICAgICAgICAgICAgICAgICAgICAgLy8gU3R5bGUgb2YgdGhlIG91dGVyIG5nLWNvbnRhaW5lci4gIFxuICBASW5wdXQoKSBjbG9zYWJsZTogYW55ID0gXCJOXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXMgdGhlIGZvcm0gY2xvc2FibGUgWS9OXG4gIEBJbnB1dCgpIHNlYXJjaDogYW55ID0gJ1RPUCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9jYXRpb24gb2YgdGhlIHNlYXJjaCBib3guXG4gIEBJbnB1dCgpIGJzX3JvdzogYW55ID0gJ1knOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWSBtZWFucyBhZGQgYSBib290c3RyYXAgcm93LlxuICBASW5wdXQoKSBic19jb2w6IGFueSA9ICdjb2wtc20tMTIgY29sLWxnLTEyIGNvbC14bC0xMic7ICAgLy8gV2hhdCBib290c3RyYXAgY29sdW1ucy5cbiAgQElucHV0KCkgdGFibGVfY2xhc3M6IGFueSA9ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCc7ICAgLy8gY2xhc3Mgb2YgdGhlIHRhYmxlLlxuICBASW5wdXQoKSB0YWJsZV9zdHlsZTogYW55ID0gJyc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHlsZSBvZiB0aGUgdGFibGUuXG4gIEBJbnB1dCgpIGVkaXQ6IGFueSA9ICdZJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGN1c3RvbSBlZGl0IGJ1dHRvbi5cbiAgQElucHV0KCkgdGl0bGU6IGFueSA9ICdUaXRsZSBOb3QgU2V0JzsgICAgICAgICAgICAgICAgICAvLyB0aXRsZSBvZiB0aGUgcGFnZS5cbiAgQElucHV0KCkgcGFnaW5hdGlvbjogYW55ID0gJ1knOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHBhZ2luYXRpb24uXG4gIEBJbnB1dCgpIHBhZ2VzaXplOiBudW1iZXIgPSAyNTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93cyBwZXIgcGFnZSBmb3IgcGFnaW5hdGlvbi5cbiAgQElucHV0KCkgaWQ6IGFueSA9ICcwJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZCBmb3Igd2hlcmUgY2xhdXNlLlxuICBASW5wdXQoKSBpZDI6IGFueSA9ICcwJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZCBmb3Igd2hlcmUgY2xhdXNlLlxuICBASW5wdXQoKSBpZDM6IGFueSA9ICcwJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZCBmb3Igd2hlcmUgY2xhdXNlLlxuXG4gIEBJbnB1dCgpIG9wZW46IGFueSA9IFwiWVwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb2VzIGEgY2xvc2FibGUgbGlzdCBzdGFydCBvcGVuLlxuICBASW5wdXQoKSBjbGFzczogYW55ID0gJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJzsgIC8vIENsYXNzIGZvciB0aGUgdGFibGUgY29udGFpbmVyLlxuICBASW5wdXQoKSBzdHlsZTogYW55ID0gXCJcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3R5bGUgZm9yIHRoZSB0YWJsZSBjb250YWluZXIuXG4gIEBJbnB1dCgpIGhhbmRsZXI6IGFueSA9ICdkZWZhdWx0JzsgICAgICAgICAgICAgICAgICAgICAgLy8gd2hhdCBoYW5kbGVyIGlzIHVzZWQgdG8gcHJvY2VzcyB0aGUgZm9ybS5cbiAgQE91dHB1dCgpIGJ1dHRvbl9jbGljazogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHJvd19jbGljazogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHRvcF9idXR0b25fY2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIHBhcmFtZXRlcnM6IGFueSA9IHsgcGFnZTogJycsIGlkOiAnJywgaWQyOiAnJywgaWQzOiAnJ307XG4gIGxhc3RfcGFyYW1ldGVyczogYW55ID0geyBwYWdlOiAneHh4JywgaWQ6ICd4eHgnLCBpZDI6ICd4eHgnLCBpZDM6ICd4eHgnIH1cbiAgcGFnZTogYW55ID0gJyc7XG4gIFxuICBjb3VudGVyOiBudW1iZXIgPSAwO1xuICBcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZGF0YVNlcnZpY2U6IFNRTERhdGFTZXJ2aWNlKSB7ICAgICBcbiAgICB0aGlzLm15T2JzID0gdGhpcy5fZGF0YVNlcnZpY2UuZGF0YVN1YmplY3Quc3Vic2NyaWJlKGQgPT4ge1xuICAgICAgdGhpcy5kYXRhPWQ7XG4gICAgICBpZiAoZC5lcnJvcl9jb2RlPT09MCkge1xuICAgICAgICB0aGlzLmFkZGluZz0nTic7XG4gICAgICAgIHRoaXMudGFibGVSZWZyZXNoKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuICBcbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gIHRoaXMuZm9ybWF0LnNlYXJjaD0nWSc7XG4gIH1cbiAgXG4gIHRvcEJ1dHRvbkNsaWNrKG06IGFueSkge1xuICB0aGlzLnRvcF9idXR0b25fY2xpY2suZW1pdChtKTtcbiAgfVxuICBcbiAgcm93Q2xpY2sobTogYW55KSB7XG4gIHRoaXMucm93X2NsaWNrLmVtaXQobSk7XG4gIH1cbiAgXG4gIGVkaXRDbGljayhtOiBhbnkpIHtcblxuICAgICAgY29uc29sZS5sb2coJ2NsaWNrZWQgbScpXG5cbiAgICAgIGxldCBwOiBhbnkgPSB7IGlkOiAnJywgaWQyOiAnJywgaWQzOiAnJyB9O1xuXG4gICAgICBpZiAobS5pZCE9PXVuZGVmaW5lZCkgeyBwLmlkID0gbS5pZCB9O1xuICAgICAgaWYgKG0uaWQyIT09dW5kZWZpbmVkKSB7IHAuaWQyID0gbS5pZDIgfTtcbiAgICAgIGlmIChtLmlkMyE9PXVuZGVmaW5lZCkgeyBwLmlkMyA9IG0uaWQzIH07XG5cbiAgICAgIGlmIChtLmVkaXQ9PT0nWScpIHtcbiAgICAgICAgICBtLmVkaXQ9J04nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaCgodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgdmFsdWUuZWRpdD0nTic7XG4gICAgICAgICAgIH0pO1xuICAgICAgICAgICB0aGlzLmFkZGluZz0nTic7XG4gICAgICAgICAgIHRoaXMuX2RhdGFTZXJ2aWNlLmNvbnRhaW5lclN1YmplY3QubmV4dChwKTtcbiAgICAgICAgICBtLmVkaXQ9J1knO1xuICAgICAgfVxuXG4gIH1cbiAgXG4gIGFkZENsaWNrKCkge1xuICAgIGxldCBwOiBhbnkgPSB7IGlkOiAnJywgaWQyOiAnJywgaWQzOiAnJyB9O1xuICAgIGlmICh0aGlzLmFkZGluZz09PSdZJykge1xuICAgICAgICB0aGlzLmFkZGluZz0nTic7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5saXN0LmZvckVhY2goKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICB2YWx1ZS5lZGl0PSdOJztcbiAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9kYXRhU2VydmljZS5jb250YWluZXJTdWJqZWN0Lm5leHQocCk7XG4gICAgICAgIHRoaXMuYWRkaW5nPSdZJztcbiAgICB9XG59XG5cbiAgYnV0dG9uQ2xpY2sobTogYW55KSB7XG4gIHRoaXMuYnV0dG9uX2NsaWNrLmVtaXQobSk7XG4gIH1cbiAgXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy51c2VfcGFyYW1ldGVycz09PSdZJykge1xuICAgICAgdGhpcy5teVBhcmFtZXRlck9icyA9IHRoaXMuX2RhdGFTZXJ2aWNlLnBhcmFtU3ViamVjdC5zdWJzY3JpYmUoZCA9PiB7XG4gICAgICAgIHRoaXMucGFyYW1ldGVycz1kO1xuICAgICAgICB0aGlzLm15RGF0YU9icyA9IHRoaXMuX2RhdGFTZXJ2aWNlLmdldFNRTCh0aGlzLnNxbCwgdGhpcy5wYXJhbWV0ZXJzKS5zdWJzY3JpYmUoKGRhdGE6YW55KT0+e1xuICAgICAgICAgIHRoaXMubGlzdD1kYXRhO1xuICAgICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZTogYW55KSB7XG4gICAgICAgICAgICB2YWx1ZS5hY3RpdmU9J04nO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgfSk7XG4gICAgICB9KVxuICAgIH0gXG4gICAgaWYgKHRoaXMudXNlX3BhcmFtZXRlcnM9PT0nTicpIHtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnBhZ2U9dGhpcy5wYWdlO1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuaWQ9dGhpcy5pZDtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmlkMj10aGlzLmlkMjtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmlkMz10aGlzLmlkMztcbiAgICAgICAgdGhpcy5teURhdGFPYnMgPSB0aGlzLl9kYXRhU2VydmljZS5nZXRTUUwodGhpcy5zcWwsIHRoaXMucGFyYW1ldGVycykuc3Vic2NyaWJlKChkYXRhOmFueSk9PntcbiAgICAgICAgICB0aGlzLmxpc3Q9ZGF0YTtcbiAgICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWU6IGFueSkge1xuICAgICAgICAgICAgdmFsdWUuYWN0aXZlPSdOJztcbiAgICAgICAgICB9KTtcbiAgICAgICAgIH0pO1xuICAgIH1cblxuICB0aGlzLmZvcm1hdC50aXRsZT10aGlzLnRpdGxlO1xuICB0aGlzLmZvcm1hdC5jbGFzcz10aGlzLmNsYXNzO1xuICB0aGlzLmZvcm1hdC5zdHlsZT10aGlzLnN0eWxlO1xuICB0aGlzLmZvcm1hdC5wYWdpbmF0aW9uPXRoaXMucGFnaW5hdGlvbjtcbiAgdGhpcy5mb3JtYXQucGFnZXNpemU9dGhpcy5wYWdlc2l6ZTtcbiAgaWYgKHRoaXMuYnNfcm93PT0nWScpIHtcbiAgICAgIHRoaXMucm93X3BsYWNlaG9sZGVyPVwicm93XCI7XG4gIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvd19wbGFjZWhvbGRlcj1cIm5vbmVcIjtcbiAgfVxuICB0aGlzLmNvbF9wbGFjZWhvbGRlcj10aGlzLmJzX2NvbDtcbiAgXG4gIHRoaXMuY29sdW1uX2xpc3QuZm9yRWFjaCgoZTogRWxlbWVudFJlZikgPT4ge1xuICBcbiAgICAgICBsZXQgY29sdW1uX3RlbXBsYXRlOiBhbnkgPSB7IGNvbHVtbl9uYW1lOiAnJywgIGNsYXNzOiAnJywgIHR5cGU6ICcnLCAgc3R5bGU6ICcnLCAgdGl0bGU6ICcnLCAgdmFsdWU6ICcnIH07XG4gICAgICAgXG4gICAgICAgLy8tLSBUSCBpcyBkYXRhIGNvbHVtblxuICAgICAgIGlmIChlLm5hdGl2ZUVsZW1lbnQubm9kZU5hbWU9PSdUSCcpIHtcbiAgICAgICAgIGNvbHVtbl90ZW1wbGF0ZS50eXBlPVwiZGF0YVwiO1xuICAgICAgICAgY29sdW1uX3RlbXBsYXRlLnZhbHVlPWUubmF0aXZlRWxlbWVudC5pZDtcbiAgICAgICAgIGNvbHVtbl90ZW1wbGF0ZS50aXRsZT1lLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgIH0gICAgICBcbiAgICAgICAvLy0tIEJVVFRPTiBpcyBidXR0b24gY29sdW1uXG4gICAgICAgaWYgKGUubmF0aXZlRWxlbWVudC5ub2RlTmFtZT09J0JVVFRPTicpIHtcbiAgICAgICAgIGNvbHVtbl90ZW1wbGF0ZS50eXBlPVwiYnV0dG9uXCI7XG4gICAgICAgICBjb2x1bW5fdGVtcGxhdGUudmFsdWU9Jyc7XG4gICAgICAgICBjb2x1bW5fdGVtcGxhdGUudGl0bGU9ZS5uYXRpdmVFbGVtZW50LmlubmVySFRNTDtcbiAgICAgICB9IFxuICAgICAgIC8vLS0gVEQgaXMgdGV4dCBjb2x1bW5cbiAgICAgICBpZiAoZS5uYXRpdmVFbGVtZW50Lm5vZGVOYW1lPT0nVEQnKSB7XG4gICAgICAgICBjb2x1bW5fdGVtcGxhdGUudHlwZT1cInRleHRcIjtcbiAgICAgICAgIGNvbHVtbl90ZW1wbGF0ZS50aXRsZT0nJztcbiAgICAgICAgIGNvbHVtbl90ZW1wbGF0ZS52YWx1ZT1lLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgIH0gXG4gICAgICAgaWYgKGUubmF0aXZlRWxlbWVudC5jbGFzc05hbWUhPT11bmRlZmluZWQpIHsgY29sdW1uX3RlbXBsYXRlLmNsYXNzPWUubmF0aXZlRWxlbWVudC5jbGFzc05hbWU7IH1cbiAgICAgICBjb2x1bW5fdGVtcGxhdGUuc3R5bGU9ZS5uYXRpdmVFbGVtZW50LnN0eWxlLmNzc1RleHQ7XG4gICAgICAgdGhpcy5mb3JtYXQuY29sdW1ucy5wdXNoKGNvbHVtbl90ZW1wbGF0ZSk7XG4gICAgICAgXG4gIH0pO1xuXG4gICBpZiAodGhpcy5fZGF0YVNlcnZpY2UhPT11bmRlZmluZWQmJnRoaXMucGFyYW1ldGVycyE9PXVuZGVmaW5lZCYmdGhpcy5zcWwhPT11bmRlZmluZWQpIHtcbiAgICAgIGlmICh0aGlzLmxhc3RfcGFyYW1ldGVycy5wYWdlIT10aGlzLnBhcmFtZXRlcnMucGFnZXx8XG4gICAgICAgICAgdGhpcy5sYXN0X3BhcmFtZXRlcnMuaWQhPXRoaXMucGFyYW1ldGVycy5pZHx8XG4gICAgICAgICAgdGhpcy5sYXN0X3BhcmFtZXRlcnMuaWQyIT10aGlzLnBhcmFtZXRlcnMuaWQyfHxcbiAgICAgICAgICB0aGlzLmxhc3RfcGFyYW1ldGVycy5pZDMhPXRoaXMucGFyYW1ldGVycy5pZDMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RfcGFyYW1ldGVycy5wYWdlPXRoaXMucGFyYW1ldGVycy5wYWdlO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdF9wYXJhbWV0ZXJzLmlkPXRoaXMucGFyYW1ldGVycy5pZDtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RfcGFyYW1ldGVycy5pZDI9dGhpcy5wYXJhbWV0ZXJzLmlkMjtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RfcGFyYW1ldGVycy5pZDM9dGhpcy5wYXJhbWV0ZXJzLmlkMztcbiAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubXlEYXRhT2JzID0gdGhpcy5fZGF0YVNlcnZpY2UuZ2V0U1FMKHRoaXMuc3FsLCB0aGlzLnBhcmFtZXRlcnMpLnN1YnNjcmliZSgoZGF0YTphbnkpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhIT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0PWRhdGE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xuIFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgfVxuICBcbiAgdGFibGVSZWZyZXNoKCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0X3BhcmFtZXRlcnMucGFnZT10aGlzLnBhcmFtZXRlcnMucGFnZTtcbiAgICAgICAgICAgIHRoaXMubGFzdF9wYXJhbWV0ZXJzLmlkPXRoaXMucGFyYW1ldGVycy5pZDtcbiAgICAgICAgICAgIHRoaXMubGFzdF9wYXJhbWV0ZXJzLmlkMj10aGlzLnBhcmFtZXRlcnMuaWQyO1xuICAgICAgICAgICAgdGhpcy5sYXN0X3BhcmFtZXRlcnMuaWQzPXRoaXMucGFyYW1ldGVycy5pZDM7XG4gICAgICAgICAgICB0aGlzLmFkZGluZz0nTic7XG4gICAgICAgICAgICB0aGlzLm15RGF0YU9icyA9IHRoaXMuX2RhdGFTZXJ2aWNlLmdldFNRTCh0aGlzLnNxbCwgdGhpcy5wYXJhbWV0ZXJzKS5zdWJzY3JpYmUoKGRhdGE6YW55KT0+e1xuICAgICAgICAgICAgICB0aGlzLmxpc3Q9ZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICB9XG4gIFxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAvLyAgICAgdGhpcy5teU9icy51bnN1YnNjcmliZSgpO1xuIC8vICAgICB0aGlzLm15RGF0YU9icy51bnN1YnNjcmliZSgpO1xuIC8vICAgICB0aGlzLm15UGFyYW1ldGVyT2JzLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICB9IiwiPGRpdiBjbGFzcz1cImNhcmRcIiBbY2xhc3NdPVwiY2xhc3NcIiBbc3R5bGVdPVwic3R5bGVcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXJcIiAgc3R5bGU9XCJtYXJnaW4tdG9wOiAwcHg7XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIiBzdHlsZT1cIndpZHRoOjEwMCU7XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTlcIj5cbiAgICAgICAgICAgICAgICA8aDI+e3sgdGl0bGUgfX08L2gyPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTNcIiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0O1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gKGNsaWNrKT1cImFkZENsaWNrKClcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiYmkgYmktcGx1cy1zcXVhcmVcIj48L2k+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPlxuICAgICAgICA8ZGl2ICpuZ0lmPVwiYWRkaW5nPT0nWSdcIiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMlwiPlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJjb250ZW50VG1wbFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyXCIgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIChjbGljayk9XCJhZGRDbGljaygpXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiPkNsb3NlPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgKm5nSWY9XCJmb3JtYXQuc2VhcmNoPT0nVE9QJ1wiIGNsYXNzPVwicm93IG0tMSBwLTNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNlwiPlxuICAgICAgICAgICAgICAgIFNlYXJjaDogPGlucHV0IHN0eWxlPVwibWF4LXdpZHRoOjMyMHB4O1wiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBpZD1cInRlcm1cIiBuYW1lPVwidGVybVwiIFsobmdNb2RlbCldPVwidGVybVwiPiBcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiAqbmdJZj1cImZvcm1hdC5idXR0b25zLmxlbmd0aD4wfHxmb3JtYXQuc2VhcmNoPT0nWSdcIiBjbGFzcz1cInJvdyBtLTEgcC0zXCI+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZm9ybWF0LnNlYXJjaD09J1knXCIgY2xhc3M9XCJjb2wtbGctNlwiPlxuICAgICAgICAgICAgICAgIFNlYXJjaDogPGlucHV0IHN0eWxlPVwibWF4LXdpZHRoOjMyMHB4O1wiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBpZD1cInRlcm1cIiBuYW1lPVwidGVybVwiIFsobmdNb2RlbCldPVwidGVybVwiPiBcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0yXCIgKm5nRm9yPVwibGV0IG0gb2YgZm9ybWF0LmJ1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIChjbGljayk9XCJ0b3BCdXR0b25DbGljayhtLnZhbHVlKTtcIiBbY2xhc3NdPVwibS5jbGFzc1wiIFtzdHlsZV09XCJtLnN0eWxlXCIgW2lubmVySFRNTF09XCJtLnRpdGxlXCI+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx0YWJsZSBbY2xhc3NdPVwidGFibGVfY2xhc3NcIiBbc3R5bGVdPVwidGFibGVfc3R5bGVcIj5cbiAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBtIG9mIGZvcm1hdC5jb2x1bW5zXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0aCAqbmdJZj1cIm0udHlwZSE9J2J1dHRvbidcIiBbc3R5bGVdPVwibS5zdHlsZVwiIGNsYXNzPVwicC0yXCI+e3sgbS50aXRsZSB9fTwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0aCAqbmdJZj1cIm0udHlwZT09J2J1dHRvbidcIiBbc3R5bGVdPVwibS5zdHlsZVwiIGNsYXNzPVwicC0yXCI+PC90aD5cbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj4gICBcbiAgICAgICAgICAgICAgICA8dGQgKm5nSWY9XCJlZGl0PT0nWSdcIj5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgPHRib2R5PlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBtIG9mIGxpc3QgfCBmaWx0ZXI6IHRlcm0gfCBwYWdpbmF0ZTogeyBjdXJyZW50UGFnZTogcCAsIGl0ZW1zUGVyUGFnZTogZm9ybWF0LnBhZ2VzaXplIH1cIj5cbiAgICAgICAgICAgIDx0ciBjbGFzcz1cInAtMlwiPlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IG4gb2YgZm9ybWF0LmNvbHVtbnNcIj5cbiAgICAgICAgICAgICAgICA8dGQgKGNsaWNrKT1cInJvd0NsaWNrKG0pXCIgW3N0eWxlXT1cIm0uc3R5bGVcIiAgKm5nSWY9XCJuWyd0eXBlJ109PSdkYXRhJ1wiIFtpbm5lckhUTUxdPVwibVtuWyd2YWx1ZSddXVwiIFtjbGFzc109XCJuWydjbGFzcyddXCI+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIChjbGljayk9XCJyb3dDbGljayhtKVwiIFtzdHlsZV09XCJtLnN0eWxlXCIgICpuZ0lmPVwiblsndHlwZSddPT0ndGV4dCdcIiBbaW5uZXJIVE1MXT1cIm5bJ3ZhbHVlJ11cIiBbY2xhc3NdPVwiblsnY2xhc3MnXVwiPjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkICpuZ0lmPVwiblsndHlwZSddPT0nYnV0dG9uJ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIChjbGljayk9XCJidXR0b25DbGljayhtKVwiIFtzdHlsZV09XCJtLnN0eWxlXCIgW2NsYXNzXT1cIm4uY2xhc3NcIiBbaW5uZXJIVE1MXT1cIm4udGl0bGVcIj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgKm5nSWY9XCJlZGl0PT0nWSdcIiBzdHlsZT1cIndpZHRoOjQwcHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tbGlnaHRcIiAoY2xpY2spPVwiZWRpdENsaWNrKG0pO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImJpIGJpLXBlbmNpbC1zcXVhcmVcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyICpuZ0lmPVwibT8uZWRpdD09J1knXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgW2NvbFNwYW5dPVwiZm9ybWF0LmNvbHVtbnMubGVuZ3RoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImNvbnRlbnRUbXBsXCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4gXG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJmb3JtYXQucGFnaW5hdGlvbj09J1knXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhZ2luZy1jb250cm9scyAocGFnZUNoYW5nZSk9XCJwID0gJGV2ZW50XCIgW2lzSXRlbXNQZXJQYWdlXT1cImZhbHNlXCIgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwibXktcGFnaW5hdGlvblwiPjwvcGFnaW5nLWNvbnRyb2xzPiBcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+IFxuICAgICAgICAgICAgPC9kaXY+IFxuPG5nLXRlbXBsYXRlICNjb250ZW50VG1wbD5cbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJbZm9ybV1cIj48L25nLWNvbnRlbnQ+XG48L25nLXRlbXBsYXRlPlxuIl19